<!-- Forgot Password Form - Diseño Futurista -->
<div class="forgot-container">
  
  <!-- Header -->
  <div class="form-header">
    <div class="icon-container">
      <i class="fas fa-key"></i>
      <div class="icon-glow"></div>
    </div>
    <h2>¿Olvidaste tu Contraseña?</h2>
    <p class="subtitle">Ingresa tu email y te enviaremos las instrucciones para restablecerla</p>
  </div>

  <!-- Success Alert -->
  @if (successMessage) {
    <app-alert-message 
      type="success" 
      [message]="successMessage"
      [dismissible]="true"
      (onDismiss)="dismissSuccess()">
    </app-alert-message>
  }

  <!-- Error Alert -->
  @if (errorMessage) {
    <app-alert-message 
      type="error" 
      [message]="errorMessage"
      [dismissible]="true"
      (onDismiss)="dismissError()">
    </app-alert-message>
  }

  <!-- Form or Success State -->
  @if (!emailSent) {
    <!-- Forgot Password Form -->
    <form [formGroup]="forgotForm" (ngSubmit)="onSubmit()">
      
      <!-- Email Field -->
      <div class="form-group">
        <label for="email" style="color: white;">
          <i class="fas fa-envelope"></i>
          Correo Electrónico
        </label>
        <div class="input-wrapper">
          <input
            type="email"
            id="email"
            class="form-control"
            [class.error]="hasError('email', 'required') || hasError('email', 'email')"
            formControlName="email"
            placeholder="correo@ejemplo.com"
            autocomplete="email"
            autofocus>
          <div class="input-border"></div>
        </div>
        @if (hasError('email', 'required') || hasError('email', 'email')) {
          <span class="error-message">{{ getErrorMessage('email') }}</span>
        }
      </div>

      <!-- reCAPTCHA Badge Info -->
      @if (enableCaptcha) {
        <div class="captcha-info">
          <i class="fas fa-shield-alt"></i>
          <span>Protegido por reCAPTCHA</span>
        </div>
      }

      <!-- Submit Button -->
      <button
        type="submit"
        class="btn-submit"
        [disabled]="isLoading">
        @if (!isLoading) {
          <span class="btn-content">
            <i class="fas fa-paper-plane"></i>
            <span>Enviar Instrucciones</span>
          </span>
        } @else {
          <span class="btn-content">
            <i class="fas fa-spinner fa-spin"></i>
            <span>Enviando...</span>
          </span>
        }
        <div class="btn-glow"></div>
      </button>

    </form>
  } @else {
    <!-- Email Sent Success State -->
    <div class="success-state">
      <div class="success-icon">
        <i class="fas fa-envelope-open-text"></i>
      </div>
      <h3>Email Enviado</h3>
      <p>Revisa tu bandeja de entrada y sigue las instrucciones para restablecer tu contraseña.</p>
      
      <div class="info-box">
        <i class="fas fa-info-circle"></i>
        <span>El link expirará en 1 hora. Si no recibes el email, revisa tu carpeta de spam.</span>
      </div>

      <!-- Resend Button -->
      <button type="button" class="btn-resend" (click)="resendEmail()">
        <i class="fas fa-redo"></i>
        <span>Reenviar Email</span>
      </button>
    </div>
  }

  <!-- Divider -->
  <div class="divider">
    <span>¿Recordaste tu contraseña?</span>
  </div>

  <!-- Back to Login Link -->
  <a routerLink="/login" class="link-back">
    <i class="fas fa-arrow-left"></i>
    <span>Volver al Login</span>
  </a>

</div>
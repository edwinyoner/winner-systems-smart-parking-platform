<div class="document-type-create-container">

  <div class="page-header mb-4">
    <h2 class="page-title">
      <i class="fas fa-plus-circle me-2"></i>Crear Tipo de Documento
    </h2>
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb mb-0">
        <li class="breadcrumb-item"><a routerLink="/dashboard">Inicio</a></li>
        <li class="breadcrumb-item"><a routerLink="/document-types">Tipos de Documento</a></li>
        <li class="breadcrumb-item active">Crear</li>
      </ol>
    </nav>
  </div>

  @if (errorMessage) {
  <app-alert-message type="error" [message]="errorMessage" [dismissible]="true" (onDismiss)="dismissError()"></app-alert-message>
  }

  <div class="card">
    <div class="card-header">
      <strong><i class="fas fa-edit me-2"></i>Información del Tipo de Documento</strong>
    </div>
    <div class="card-body">
      <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <div class="row g-3">

          <div class="col-md-6">
            <label class="form-label required"><i class="fas fa-barcode me-2"></i>Código</label>
            <input type="text" class="form-control" formControlName="code"
              placeholder="Ej: DNI" [class.is-invalid]="isFieldInvalid('code')">
            @if (isFieldInvalid('code')) {
            <div class="invalid-feedback">{{ getFieldError('code') }}</div>
            }
            <small class="form-text text-muted">Código único (se guardará en mayúsculas)</small>
          </div>

          <div class="col-md-6">
            <label class="form-label required"><i class="fas fa-tag me-2"></i>Nombre</label>
            <input type="text" class="form-control" formControlName="name"
              placeholder="Ej: Documento Nacional de Identidad" [class.is-invalid]="isFieldInvalid('name')">
            @if (isFieldInvalid('name')) {
            <div class="invalid-feedback">{{ getFieldError('name') }}</div>
            }
          </div>

          <div class="col-12">
            <label class="form-label"><i class="fas fa-align-left me-2"></i>Descripción</label>
            <textarea class="form-control" formControlName="description" rows="3"
              placeholder="Descripción del tipo de documento..."></textarea>
          </div>

          <div class="col-12">
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" formControlName="status" id="statusSwitch">
              <label class="form-check-label" for="statusSwitch">
                <i class="fas fa-power-off me-2"></i><strong>Tipo Activo</strong>
              </label>
            </div>
            <small class="form-text text-muted ms-4">Los tipos activos pueden ser asignados a clientes</small>
          </div>

        </div>

        <div class="d-flex gap-2 justify-content-end mt-4">
          <button type="button" class="btn btn-secondary" (click)="cancel()" [disabled]="isSubmitting">
            <i class="fas fa-times me-2"></i>Cancelar
          </button>
          <button type="submit" class="btn btn-success" [disabled]="isSubmitting" style="color: aliceblue;">
            @if (isSubmitting) { <span class="spinner-border spinner-border-sm me-2"></span> }
            <i class="fas fa-save me-2"></i>{{ isSubmitting ? 'Guardando...' : 'Guardar Tipo' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>